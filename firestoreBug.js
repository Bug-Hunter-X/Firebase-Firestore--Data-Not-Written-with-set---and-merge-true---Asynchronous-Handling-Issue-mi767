In a Firebase project, I encountered an issue where data wasn't being written to Firestore, even though the code seemed correct.  The issue stemmed from using `set()` with merge:true in a function where a promise was not properly handled. I was adding new fields to an existing document and expected these fields to appear, however, they were not added to the document.  The problem specifically was in how asynchronous operations were handled.